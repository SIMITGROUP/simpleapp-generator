<template>
  <Crud :_id="userid" @after="after" />
</template>

<script setup lang="ts">
/**
 * This file was automatically generated by simpleapp everytime regenerate code.
 * delete file "delete-me-for-avoid-override" if you want to modify this file and
 * prevent regenerate code override it.
 * last change 2023-09-09
 * author: Ks Tan
 */
import Crud from "./form.vue";
import { User } from "~/simpleapp/generate/types";
const userid = computed(() => getPathPara("id"));
const doc = useNuxtApp().$UserDoc();

const props = defineProps<{ _id: string }>();
const after = (actionName: string, data: User, result: any) => {
  switch (actionName) {
    case "new":
      goTo(doc.getDocName(),);
      break;
    case "create":
      refreshDocumentList("user");
      if (isMobile()) goTo("user");
      else goTo(doc.getDocName(), data._id);
      break;
    case "update":
      refreshDocumentList("user");
      if (isMobile()) goTo("user");
      break;
    case "delete":
      refreshDocumentList("user");
      goTo(doc.getDocName(), );

      break;
  }
};
</script>
