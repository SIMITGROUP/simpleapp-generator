<template>
  <div
    class="w-full flex flex-row justify-between items-center header-bar h-12"
  >
    <div class="flex flex-row items-left">
      <ButtonDocumentMenus v-if="haveXorg" />
      <ButtonTenantPicker v-if="haveLogin"
        id="mainmenu-organization"
        :orgName="orgName"
        :branchCode="'HQ'"
        v-tooltip.bottom="t('Switch organization or branch')"
      />
    </div>
    <div class="p-2 text-center">
      <div>SimpleApp</div>
    </div>
    <div class="p-2 text-right">
      
      <div v-if="haveLogin" class="cursor cursor-pointer" @click="logout">Logout</div>
      
    </div>
  </div>
</template>

<script setup lang="ts">
/**
 * This file was automatically generated by simpleapp generator during initialization. It is changable.
 * --remove-this-line-to-prevent-override--
 * last change 2025-04-16
 * author: Ks Tan
 */

import _ from "lodash";
const haveLogin=computed(()=>useUserSession().loggedIn.value == true)
const haveXorg = computed(() => getCurrentXorg());
const orgName = computed(() => {
  const currentBranch: any = getCurrentBranch();
  const res = currentBranch?.branch?.organization.label ?? "Pick Company";
  return res;
});
const pageTitle = ref("");

const refreshTitle = () => {
  if (typeof useRoute().name == "string") {
    const tmp = (<string>useRoute().name).split("-");
    pageTitle.value = "pageTitle"; //tmp.length >= 2 ? t(tmp[1]) : t("home");
  }
};

const buttonText = computed(() => {
  return "buttontext";
  //getUserStore().package === 'enterprise' ? t('changeplan') : t('upgradeplan');
});

const isDialogSubs = ref(false);
const openSubs = () => {
  isDialogSubs.value = true;
};

const navigateToHome = () => {
  goTo("");
};

onMounted(() => {
  refreshTitle();
});

watch(
  () => useRoute().path,
  () => refreshTitle(),
);
</script>

<style scoped>
.header-bar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 10;
  box-shadow: 0px 4px 8.6px rgba(0, 178, 216, 0.25);
}
</style>
